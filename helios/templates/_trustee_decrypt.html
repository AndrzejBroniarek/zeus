{% load zeus_tags i18n %}
<script>
  window.TRUSTEE = {
    'name': 'trustee.name',
    'filename': 'Μερική αποκρυπτογράφηση {{ trustee.name }}.txt',
    'worker': '/static/zeus/booth/js/jscrypto/decryptworker.js'
  }
</script>
<h5>Τα τελικά ψηφοδέλτια είναι έτοιμα για αποκρυπτογράφηση.</h5>

<div class="sk-form decryption-section">
<h5>{% trans "Insert your secret key" %}</h5>
<br />
<input type="file" id="sk-file-input" />
<textarea id="sk-textarea" cols="60" rows="5">
</textarea>
</div>

<div class="polls-list">
<table class="polls-table">
<thead>
<tr>
<th>{% trans "Poll name" %}</th>
<th>{% trans "Decryption status" %}</th>
</tr>
</thead>
</thead>
<tbody>
{% for poll, factors in trustee.get_partial_decryptions %}
<tr class="poll" 
  data-poll-uuid="{{ poll.uuid }}"
  data-poll-url="{% url election_poll_index election.uuid poll.uuid %}">
  <td>{{ poll.name }}</td>
  <td>{% if factors %}
    {{ factors }}{{ trustee.email}}{{ trustee.pk}}
{% trans "Partial decryption finished" %}
{% else %}
{% trans "Do partial decryption" as label %}
{% action label "#decrypt-tally-admin-action" cls="small decrypt" %}

{% trans "Upload partial decryption" as label %}
{% action label "#decrypt-tally-admin-action" cls="small upload" %}

{% trans "Download partial decryption" as label %}
{% action label "#decrypt-tally-admin-action" cls="small download" %}
{% endif %}
</td></tr>
{% endfor %}
</tbody>
</table>
</div>
