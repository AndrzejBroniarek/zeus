{% extends "election_page.html" %}
{% load i18n %}

{% block title %}{{election.name}}: {% trans "Voters" %}{% endblock %}
{% block tabs_menu %}
{% include "_election_view_menu.html" %}
{% endblock %}

{% block content %}
<h5>{% trans "Enroll voters for poll" %}</h5>
<form method="post" action="" id="upload_form" enctype="multipart/form-data">
  {% csrf_token %}
  <p>
  {% trans "Please, prepare a simple text file with the voters in CSV form, as in the example:" %}
  </p>
  <pre>{% blocktrans %}
      1,john.doe@email.tld,John,Doe,F.,+306971234567
      2,miles@email.tld,Richard,Miles,Allan,+306971234568
      3,j.m.roe@email.tld,Jenny,Roe,M,+306971234569
      ...{% endblocktrans %}
  </pre> 
  <u style="float:right">{% trans "*The last two fields (middle name and mobile phone) are optional" %}</u>
  <br /><br />
  <p>
  {% trans "The fields are, in order:" %}
  <ol>
    <li>{% blocktrans %}Registration number. Each such number corresponds to one vote.
    The numbering is not required to be sequential. If no registration numbers
    are available or you do not wish to use them, simply enumerate the voters
    using 1, 2, 3, ..., etc.{% endblocktrans %}
    </li>
    <li>{% blocktrans %}Personal email of the voter where they will receive the secret invitation to vote.
    Multiple registered entries may have the same email address,
    if the same person is eligiible to more than one votes
    (e.g. when representing multiple parties separately).{% endblocktrans %}
    </li>
    <li>{% trans "The voter's given name" %}</li>
    <li>{% trans "The voter's surname" %}</li>
    <li>{% trans "The voter's middle name, or other title or name (optional)" %}</li>
    <li>{% trans "A personal mobile phone number of the voter (optional)" %}</li>
  </ol>
  </p>
  <p>
    {% blocktrans %}The easiest way to prepare such a file is to first prepare it
    as a spreadsheet and then export it in CSV form.{% endblocktrans %}
  </p>
  {% if error %}
  <div style="color: red;">{{error}}</div>
  {% endif %}
    <input type="hidden" name="csrf_token" value="{{csrf_token}}"/>
    
    <input type="file" name="voters_file" />
    <br /><br />
    <input class="button success" type="submit" value="{% trans "Upload file" %}"/>
</form>

<div id="processing">
</div>

<div id="done" style="display:none;">
  {% trans "Upload complete." %}<br />
  {% trans "You can now" %} <a href="./manage">{% trans "review the voter list" %}</a>.
</div>

{% endblock %}
